import{v as N,k as z,V as H,_ as R}from"./index.931e29e8.js";/* empty css               *//* empty css              *//* empty css               *//* empty css              *//* empty css              *//* empty css                *//* empty css              *//* empty css               *//* empty css               *//* empty css                */import{d as B,r as W,C as T,D as V,aI as e,aH as o,u as s,aM as l,aN as c,aW as S,b2 as X,b7 as Z,aX as F,b3 as G,b5 as q,f as b,c as J,w as K,aZ as Y,G as ee,a6 as oe,bR as te,bE as se,b6 as ne,bz as ae}from"./arco.d070d3bc.js";import{u as re}from"./loading.50473042.js";import{c as w}from"./cloneDeep.47777689.js";/* empty css               *//* empty css               */import{S as ie,d as P,D as le,Q as ce}from"./permission.ca5b32e4.js";import"./chart.dd5d83bb.js";import"./vue.02dbc53f.js";const me=B({__name:"permission-group-form",props:["data"],emits:["close"],setup(k,{emit:r}){const p=k,{t:m}=N.exports.useI18n(),y=()=>{r("close")},d=W(p.data),x=()=>{ie(d).then(g=>{g.data&&(y(),S.success("\u6DFB\u52A0\u6210\u529F"))})};return(g,_)=>{const t=X,f=Z,i=F,h=G,I=q;return T(),V("div",null,[e(I,{ref:"formDataData",layout:"vertical"},{default:o(()=>[e(f,{field:"name",label:s(m)("permission.form.name")},{default:o(()=>[e(t,{modelValue:d.name,"onUpdate:modelValue":_[0]||(_[0]=v=>d.name=v),placeholder:s(m)("permission.form.name.input")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(f,null,{default:o(()=>[e(h,null,{default:o(()=>[e(i,{type:"dashed",onClick:y},{default:o(()=>[l(c(s(m)("button.cancel")),1)]),_:1}),e(i,{type:"primary",onClick:x},{default:o(()=>[l(c(s(m)("button.submit")),1)]),_:1})]),_:1})]),_:1})]),_:1},512)])}}}),ue={class:"container"},pe={style:{"margin-bottom":"15px"}},de={name:"ServerPermissionGroup"},_e=B({...de,setup(k){const r=b(!1),p=b(P),m=()=>{p.value=P,r.value=!0},y=n=>{p.value=n,r.value=!0},d=n=>{le({id:n.id}).then(u=>{u.data&&(v(),S.success({content:t("message.delete.success")}))})},x=()=>{r.value=!1,v()},{loading:g,setLoading:_}=re(!0),{t}=N.exports.useI18n(),f=b([]),i=b([]),h=b([]),I=J(()=>[{title:t("permissionTable.columns.id"),dataIndex:"id",slotName:"id"},{title:t("permissionTable.columns.name"),dataIndex:"name"},{title:t("permissionTable.columns.user_count"),dataIndex:"user_count",slotName:"user_count"},{title:t("permissionTable.columns.server_count"),dataIndex:"server_count",slotName:"server_count"},{title:t("permissionTable.columns.operations"),dataIndex:"operations",slotName:"operations"}]),v=async()=>{_(!0);try{const{data:n}=await ce();f.value=n}catch{}finally{_(!1)}};return v(),K(()=>I.value,n=>{i.value=w(n),i.value.forEach((u,D)=>{u.checked=!0}),h.value=w(i.value)},{deep:!0,immediate:!0}),(n,u)=>{const D=Y("Breadcrumb"),M=oe,C=F,A=z,E=H,U=te,$=G,L=se,O=ne,Q=ae;return T(),V("div",ue,[e(D,{items:["menu.server","menu.server.permission_group"]},null,8,["items"]),e(O,null,{default:o(()=>[ee("div",pe,[e(C,{type:"primary",onClick:m},{icon:o(()=>[e(M)]),default:o(()=>[l(" "+c(s(t)("permission.form.add.permission.group")),1)]),_:1})]),e(L,{"row-key":"id",loading:s(g),pagination:!1,columns:i.value,data:f.value,bordered:!1},{user_count:o(({record:a})=>[e(A),l(" "+c(a.user_count),1)]),server_count:o(({record:a})=>[e(E),l(" "+c(a.server_count),1)]),operations:o(({record:a})=>[e($,null,{default:o(()=>[e(C,{type:"primary",onClick:j=>y(a)},{default:o(()=>[l(c(s(t)("button.edit")),1)]),_:2},1032,["onClick"]),e(U,{content:s(t)("permission.delete"),onOk:j=>d(a),type:"warning"},{default:o(()=>[e(C,{type:"primary",status:"danger"},{default:o(()=>[l(c(s(t)("button.delete")),1)]),_:1})]),_:2},1032,["content","onOk"])]),_:2},1024)]),_:1},8,["loading","columns","data"])]),_:1}),e(Q,{visible:r.value,"onUpdate:visible":u[0]||(u[0]=a=>r.value=a),width:"380px",title:s(t)("permission.form.add.permission.group"),"unmount-on-close":!0,footer:!1},{default:o(()=>[e(me,{data:p.value,onClose:x},null,8,["data"])]),_:1},8,["visible","title"])])}}});const Ge=R(_e,[["__scopeId","data-v-37640ad1"]]);export{Ge as default};
