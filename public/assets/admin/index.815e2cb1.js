import{v as G,E as I,j as J,_ as O}from"./index.66251433.js";/* empty css              *//* empty css               *//* empty css              *//* empty css              *//* empty css                *//* empty css              *//* empty css               *//* empty css               */import{d as Q,f as d,r as X,c as Z,w as A,aZ as K,C as u,D as r,aI as l,aH as i,G as S,u as o,aM as b,aN as s,aF as p,aV as R,b2 as Y,aX as ee,b3 as te,bE as ae,b6 as oe,bc as ne,bd as se}from"./arco.d070d3bc.js";import{u as ie}from"./loading.50473042.js";import{c as N}from"./cloneDeep.47777689.js";import{C as le,a as ce}from"./ticket.9e7134ae.js";import"./chart.dd5d83bb.js";import"./vue.02dbc53f.js";const de=k=>(ne("data-v-ab2e8cf9"),k=k(),se(),k),ue={class:"container"},re={style:{"margin-bottom":"15px",display:"flex"}},pe=de(()=>S("div",{style:{width:"100%"}},null,-1)),me={key:0},_e={key:1},he={key:2},be={key:0},ke={key:1},ve={key:2},fe={name:"ticketManager"},ge=Q({...fe,setup(k){const f=d(0),V=a=>{const T=(window.screen.availHeight-30-720)/2,x=(window.screen.availWidth-10-520)/2;window.open(`${J}/#/ticket/chat?id=${a}`,"\u5DE5\u5355","height="+720+",innerHeight="+720+",width="+520+",innerWidth="+520+",top="+T+",left="+x+",status=no,toolbar=no,menubar=no,location=no,resizable=no,scrollbars=0,titlebar=no")},z=a=>{le({id:a}).then(()=>{_()})},H=()=>({number:"",name:"",contentType:"",filterType:"",createdTime:[],status:""}),{loading:W,setLoading:y}=ie(!0),{t}=G.exports.useI18n(),w=d([]),B=d(H()),v=d([]),D=d([]),j=d("medium"),g=d(),c={current:1,pageSize:100},m=X({...c,showTotal:!0,showJumper:!0,showPageSize:!0,pageSizeOptions:[100,500,1e3]}),E=Z(()=>[{title:t("ticketTable.columns.id"),dataIndex:"id",slotName:"id"},{title:t("ticketTable.columns.subject"),dataIndex:"subject",slotName:"subject"},{title:t("ticketTable.columns.level"),dataIndex:"level",slotName:"level"},{title:t("ticketTable.columns.status"),dataIndex:"status",slotName:"status"},{title:t("ticketTable.columns.created_at"),dataIndex:"created_at",slotName:"created_at"},{title:t("ticketTable.columns.updated_at"),dataIndex:"updated_at",slotName:"updated_at"},{title:t("ticketTable.columns.operations"),dataIndex:"operations",slotName:"operations"}]),$=a=>{_({pageSize:c.pageSize,current:1})},_=async a=>{a||(a={...c}),y(!0);try{a.email=g.value,a.status=f.value;const{data:n,total:h}=await ce(a);w.value=n,m.current=a.current,c.current=a.current,m.total=h}catch{}finally{y(!1)}},M=()=>{_({...c,...B.value})},L=a=>{_({...c,current:a})};return _(c),A(()=>E.value,a=>{v.value=N(a),v.value.forEach((n,h)=>{n.checked=!0}),D.value=N(v.value)},{deep:!0,immediate:!0}),(a,n)=>{const h=K("Breadcrumb"),T=R,x=Y,C=ee,P=te,U=ae,F=oe;return u(),r("div",ue,[l(h,{items:["menu.user","menu.user.work_order"]},null,8,["items"]),l(F,null,{default:i(()=>[S("div",re,[l(T,{style:{width:"120px","text-align":"center"},type:"round",modelValue:f.value,"onUpdate:modelValue":n[0]||(n[0]=e=>f.value=e),onChange:n[1]||(n[1]=e=>M()),"checked-value":0,"unchecked-value":1,"checked-text":o(t)("ticketTable.actions.turned_on"),"unchecked-text":o(t)("ticketTable.actions.closed")},null,8,["modelValue","checked-text","unchecked-text"]),pe,l(x,{style:{width:"180px"},modelValue:g.value,"onUpdate:modelValue":n[2]||(n[2]=e=>g.value=e),placeholder:o(t)("ticketTable.actions.email.input"),onInput:$},null,8,["modelValue","placeholder"])]),l(U,{"row-key":"id",loading:o(W),pagination:m,columns:v.value,data:w.value,bordered:!1,size:j.value,onPageChange:L},{index:i(({rowIndex:e})=>[b(s(e+1+(m.current-1)*m.pageSize),1)]),level:i(({record:e})=>[e.level===2?(u(),r("span",me,s(o(t)("ticketTable.actions.high")),1)):p("",!0),e.level===1?(u(),r("span",_e,s(o(t)("ticketTable.actions.middle")),1)):p("",!0),e.level===0?(u(),r("span",he,s(o(t)("ticketTable.actions.low")),1)):p("",!0)]),status:i(({record:e})=>[e.status===1?(u(),r("span",be,s(o(t)("ticketTable.actions.closed")),1)):p("",!0),e.status===0&&e.reply_status===0?(u(),r("span",ke,s(o(t)("ticketTable.actions.replied")),1)):p("",!0),e.status===0&&e.reply_status===1?(u(),r("span",ve,s(o(t)("ticketTable.actions.waiting_for_processing")),1)):p("",!0)]),updated_at:i(({record:e})=>[b(s(o(I)(e.updated_at)),1)]),created_at:i(({record:e})=>[b(s(o(I)(e.created_at)),1)]),operations:i(({record:e})=>[l(P,null,{default:i(()=>[l(C,{onClick:q=>V(e.id)},{default:i(()=>[b(s(o(t)("ticketTable.actions.see_details")),1)]),_:2},1032,["onClick"]),l(C,{type:"primary",onClick:q=>z(e.id),disabled:e.status===1},{default:i(()=>[b(s(o(t)("ticketTable.actions.close")),1)]),_:2},1032,["onClick","disabled"])]),_:2},1024)]),_:1},8,["loading","pagination","columns","data","size"])]),_:1})])}}});const Ee=O(ge,[["__scopeId","data-v-ab2e8cf9"]]);export{Ee as default};
