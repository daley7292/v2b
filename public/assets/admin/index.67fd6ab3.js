import{v as W,H as st,_ as Te,Y as lt,E as we,Z as ot,p as nt,$ as ut,T as it,F as rt}from"./index.931e29e8.js";/* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css              *//* empty css              *//* empty css                *//* empty css              *//* empty css               *//* empty css               *//* empty css               */import{d as J,r as Q,f as p,C as k,aE as z,aH as l,aI as s,u as a,aM as i,aN as e,D as B,aK as le,aJ as oe,G as t,b2 as ne,bW as dt,b7 as ue,bA as ct,bB as ge,bC as xe,aX as ie,b3 as re,b5 as de,aW as R,bc as mt,bd as _t,c as pt,o as ft,w as bt,aZ as vt,bz as se,ah as ht,be as yt,b4 as wt,a6 as kt,bO as Tt,I as gt,ag as xt,ae as Ct,bE as Vt,b6 as Dt,aY as Ut,bD as It}from"./arco.d070d3bc.js";import{S as St,_ as Nt}from"./order.a7a83fb5.js";import{u as Ft}from"./loading.50473042.js";import{c as ke}from"./cloneDeep.47777689.js";import{Q as Et}from"./node.75130ad4.js";import{S as Bt,n as At,b as Pt,D as Rt,Q as $t,R as Mt,G as qt,c as zt,d as Ot,e as jt}from"./user.68bd3115.js";import{Q as ce}from"./subscription.ae1f303c.js";import{_ as Gt,U as Lt}from"./user-network-form.9b106f9c.js";/* empty css              */import{b as Yt}from"./comm-config.3cd00c2d.js";import{g as Qt,f as Ht}from"./vue.02dbc53f.js";import"./chart.dd5d83bb.js";/* empty css                */const Wt={style:{width:"100%","text-align":"center"}},Jt=J({__name:"user-add-form",emits:["close"],setup(F,{emit:o}){const{t:u}=W.exports.useI18n(),n=Q({email_prefix:"",email_suffix:"",password:"",expired_at:void 0,plan_id:"",generate_count:void 0}),_=()=>{let m={...n};m.expired_at&&(m.expired_at=st(m.expired_at)),Bt(m).then(()=>{o("close")})},V=p([]);return(()=>{ce().then(m=>{V.value=m.data})})(),(m,b)=>{const D=ne,x=dt,y=ue,O=ct,N=ge,C=xe,E=ie,j=re,G=de;return k(),z(G,{layout:"vertical",ref:"userFormForm",onSubmit:_},{default:l(()=>[s(y,{label:a(u)("userNetworkTable.form.email")},{default:l(()=>[s(x,null,{default:l(()=>[s(D,{modelValue:n.email_prefix,"onUpdate:modelValue":b[0]||(b[0]=h=>n.email_prefix=h),placeholder:"\u8D26\u53F7(\u6279\u91CF\u751F\u6210\u8BF7\u7559\u7A7A)"},{append:l(()=>[i("@")]),_:1},8,["modelValue"]),s(D,{modelValue:n.email_suffix,"onUpdate:modelValue":b[1]||(b[1]=h=>n.email_suffix=h),placeholder:"\u57DF"},null,8,["modelValue"])]),_:1})]),_:1},8,["label"]),s(y,{label:a(u)("userNetworkTable.form.password")},{default:l(()=>[s(D,{modelValue:n.password,"onUpdate:modelValue":b[2]||(b[2]=h=>n.password=h),placeholder:"\u7559\u7A7A\u5219\u5BC6\u7801\u4E0E\u90AE\u7BB1\u76F8\u540C"},null,8,["modelValue"])]),_:1},8,["label"]),s(y,{label:a(u)("userNetworkTable.form.expiration_date")},{default:l(()=>[s(O,{"show-time":"",format:"YYYY-MM-DD HH:mm:ss",modelValue:n.expired_at,"onUpdate:modelValue":b[3]||(b[3]=h=>n.expired_at=h)},null,8,["modelValue"])]),_:1},8,["label"]),s(y,{label:a(u)("userNetworkTable.form.subscription_plan")},{default:l(()=>[s(C,{modelValue:n.plan_id,"onUpdate:modelValue":b[4]||(b[4]=h=>n.plan_id=h)},{default:l(()=>[s(N,{value:""},{default:l(()=>[i(e(a(u)("userTable.form.not")),1)]),_:1}),(k(!0),B(le,null,oe(V.value,(h,w)=>(k(),B("div",{key:w},[s(N,{value:h.id},{default:l(()=>[i(e(h.name),1)]),_:2},1032,["value"])]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),s(y,{label:a(u)("userNetworkTable.form.generate_quantity")},{default:l(()=>[s(D,{modelValue:n.generate_count,"onUpdate:modelValue":b[5]||(b[5]=h=>n.generate_count=h),placeholder:"\u5982\u679C\u4E3A\u6279\u91CF\u751F\u6210\u8BF7\u8F93\u5165\u751F\u6210\u6570\u91CF"},null,8,["modelValue"])]),_:1},8,["label"]),s(y,null,{default:l(()=>[t("div",Wt,[s(j,null,{default:l(()=>[s(E,{type:"dashed",onClick:m.close},{default:l(()=>[i(e(a(u)("userNetworkTable.form.cancel")),1)]),_:1},8,["onClick"]),s(E,{type:"primary","html-type":"submit"},{default:l(()=>[i(e(a(u)("userNetworkTable.form.submit")),1)]),_:1})]),_:1})])]),_:1})]),_:1},512)}}}),Zt=J({__name:"user-order-form",props:["email"],emits:["close"],setup(F,{emit:o}){const u=F,{t:n}=W.exports.useI18n(),_=p([]),V=()=>{o("close"),Object.keys(f).forEach(x=>{f[x]=void 0})},f=Q({email:u.email,plan_id:void 0,period:void 0,total_amount:0}),m=Q({}),b=()=>{Object.keys(f).forEach(x=>{m[x]=f[x]}),m.total_amount=f.total_amount*100,St(m).then(x=>{x.data&&(R.success("\u63D0\u4EA4\u6210\u529F"),V())})};return(()=>{ce().then(x=>{_.value=x.data})})(),(x,y)=>{const O=ne,N=ue,C=ge,E=xe,j=ie,G=re,h=de;return k(),B("div",null,[s(h,{layout:"vertical",ref:"order",model:f,onSubmit:b},{default:l(()=>[s(N,{field:"name",label:a(n)("user.order.email")},{default:l(()=>[s(O,{modelValue:f.email,"onUpdate:modelValue":y[0]||(y[0]=w=>f.email=w),placeholder:a(n)("input.placeholder.email")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),s(N,{field:"plan_id",label:a(n)("user.order.selectSubscription")},{default:l(()=>[s(E,{modelValue:f.plan_id,"onUpdate:modelValue":y[1]||(y[1]=w=>f.plan_id=w),placeholder:a(n)("input.placeholder.subscription")},{default:l(()=>[(k(!0),B(le,null,oe(_.value,(w,Z)=>(k(),B("div",{key:Z},[s(C,{value:w.id},{default:l(()=>[i(e(w.name),1)]),_:2},1032,["value"])]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),s(N,{field:"period",label:a(n)("user.order.selectPeriod")},{default:l(()=>[s(E,{placeholder:a(n)("input.placeholder.period"),modelValue:f.period,"onUpdate:modelValue":y[2]||(y[2]=w=>f.period=w)},{default:l(()=>[s(C,{value:"month_price"},{default:l(()=>[i(e(a(n)("user.order.monthly")),1)]),_:1}),s(C,{value:"quarter_price"},{default:l(()=>[i(e(a(n)("user.order.quarterly")),1)]),_:1}),s(C,{value:"half_year_price"},{default:l(()=>[i(e(a(n)("user.order.halfYearly")),1)]),_:1}),s(C,{value:"year_price"},{default:l(()=>[i(e(a(n)("user.order.yearly")),1)]),_:1}),s(C,{value:"two_year_price"},{default:l(()=>[i(e(a(n)("user.order.twoYears")),1)]),_:1}),s(C,{value:"three_year_price"},{default:l(()=>[i(e(a(n)("user.order.threeYears")),1)]),_:1}),s(C,{value:"onetime_price"},{default:l(()=>[i(e(a(n)("user.order.oneTime")),1)]),_:1}),s(C,{value:"reset_price"},{default:l(()=>[i(e(a(n)("user.order.resetPackage")),1)]),_:1})]),_:1},8,["placeholder","modelValue"])]),_:1},8,["label"]),s(N,{field:"name",label:a(n)("user.order.paymentAmount")},{default:l(()=>[s(O,{placeholder:a(n)("input.placeholder.amount"),modelValue:f.total_amount,"onUpdate:modelValue":y[3]||(y[3]=w=>f.total_amount=w),"allow-clear":""},{append:l(()=>[i(e(a(Yt)()),1)]),_:1},8,["placeholder","modelValue"])]),_:1},8,["label"]),s(N,null,{default:l(()=>[s(G,null,{default:l(()=>[s(j,{type:"dashed",onClick:V},{default:l(()=>[i(e(a(n)("button.cancel")),1)]),_:1}),s(j,{type:"primary","html-type":"submit"},{default:l(()=>[i(e(a(n)("button.submit")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])])}}}),Kt=F=>(mt("data-v-a52bfb54"),F=F(),_t(),F),Xt={class:"user-renewal-container"},ea={class:"user-info-card"},ta={class:"info-grid"},aa={class:"info-item"},sa={class:"label"},la={class:"value"},oa={class:"info-item"},na={class:"label"},ua={class:"value"},ia={class:"info-item"},ra={class:"label"},da={class:"value"},ca={class:"info-item"},ma={class:"label"},_a={class:"value"},pa={class:"statistics-table"},fa={colspan:"3"},ba={colspan:"3"},va={colspan:"3"},ha={colspan:"3"},ya=Kt(()=>t("th",null,null,-1)),wa={class:"totals-summary"},ka={class:"summary-grid"},Ta={class:"summary-card"},ga={class:"summary-item"},xa={class:"label"},Ca={class:"value"},Va={class:"summary-item"},Da={class:"label"},Ua={class:"value"},Ia={class:"summary-item"},Sa={class:"label"},Na={class:"value"},Fa={class:"summary-card"},Ea={class:"summary-item"},Ba={class:"label"},Aa={class:"value"},Pa={class:"summary-item"},Ra={class:"label"},$a={class:"value"},Ma={class:"summary-item"},qa={class:"label"},za={class:"value"},Oa={class:"summary-card"},ja={class:"summary-item"},Ga={class:"label"},La={class:"value"},Ya={class:"summary-item"},Qa={class:"label"},Ha={class:"value"},Wa={class:"summary-item"},Ja={class:"label"},Za={class:"value"},Ka={class:"summary-card total"},Xa={class:"summary-item"},es={class:"label"},ts={class:"value"},as={class:"summary-item"},ss={class:"label"},ls={class:"value"},os={class:"summary-item"},ns={class:"label"},us={class:"value"},is={class:"summary-item"},rs={class:"label"},ds={class:"value"},cs=J({__name:"user-renewal-new-purchase",props:["data"],setup(F){const o=F,{t:u}=W.exports.useI18n(),n=p(o.data),_=V=>V.toFixed(2);return(V,f)=>(k(),B("div",Xt,[t("div",ea,[t("h2",null,e(a(u)("user.userInfo")),1),t("div",ta,[t("div",aa,[t("span",sa,e(a(u)("user.id"))+":",1),t("span",la,e(n.value.user_info.id),1)]),t("div",oa,[t("span",na,e(a(u)("user.email"))+":",1),t("span",ua,e(n.value.user_info.email),1)]),t("div",ia,[t("span",ra,e(a(u)("user.commissionRate"))+":",1),t("span",da,e(n.value.user_info.commission_rate?n.value.user_info.commission_rate+"%":"\u6682\u65E0"),1)]),t("div",ca,[t("span",ma,e(a(u)("user.commissionBalance"))+":",1),t("span",_a,e(_(n.value.user_info.commission_balance)),1)])])]),t("div",pa,[t("h2",null,e(a(u)("user.periodStatistics")),1),t("table",null,[t("thead",null,[t("tr",null,[t("th",null,e(a(u)("user.period")),1),t("th",fa,e(a(u)("user.newPurchase")),1),t("th",ba,e(a(u)("user.renewal")),1),t("th",va,e(a(u)("user.upgrade")),1),t("th",ha,e(a(u)("user.total")),1)]),t("tr",null,[ya,t("th",null,e(a(u)("user.count")),1),t("th",null,e(a(u)("user.amount")),1),t("th",null,e(a(u)("user.commission")),1),t("th",null,e(a(u)("user.count")),1),t("th",null,e(a(u)("user.amount")),1),t("th",null,e(a(u)("user.commission")),1),t("th",null,e(a(u)("user.count")),1),t("th",null,e(a(u)("user.amount")),1),t("th",null,e(a(u)("user.commission")),1),t("th",null,e(a(u)("user.count")),1),t("th",null,e(a(u)("user.amount")),1),t("th",null,e(a(u)("user.commission")),1)])]),t("tbody",null,[(k(!0),B(le,null,oe(n.value.statistics,(m,b)=>(k(),B("tr",{key:b},[t("td",null,e(m.period_name),1),t("td",null,e(m.new_purchase.count),1),t("td",null,e(_(m.new_purchase.amount)),1),t("td",null,e(_(m.new_purchase.commission)),1),t("td",null,e(m.renewal.count),1),t("td",null,e(_(m.renewal.amount)),1),t("td",null,e(_(m.renewal.commission)),1),t("td",null,e(m.upgrade.count),1),t("td",null,e(_(m.upgrade.amount)),1),t("td",null,e(_(m.upgrade.commission)),1),t("td",null,e(m.total.count),1),t("td",null,e(_(m.total.amount)),1),t("td",null,e(_(m.total.commission)),1)]))),128))])])]),t("div",wa,[t("h2",null,e(a(u)("user.totalStatistics")),1),t("div",ka,[t("div",Ta,[t("h3",null,e(a(u)("user.newPurchase")),1),t("div",ga,[t("span",xa,e(a(u)("user.count"))+":",1),t("span",Ca,e(n.value.totals.new_purchase.count),1)]),t("div",Va,[t("span",Da,e(a(u)("user.amount"))+":",1),t("span",Ua,e(_(n.value.totals.new_purchase.amount)),1)]),t("div",Ia,[t("span",Sa,e(a(u)("user.commission"))+":",1),t("span",Na,e(_(n.value.totals.new_purchase.commission)),1)])]),t("div",Fa,[t("h3",null,e(a(u)("user.renewal")),1),t("div",Ea,[t("span",Ba,e(a(u)("user.count"))+":",1),t("span",Aa,e(n.value.totals.renewal.count),1)]),t("div",Pa,[t("span",Ra,e(a(u)("user.amount"))+":",1),t("span",$a,e(_(n.value.totals.renewal.amount)),1)]),t("div",Ma,[t("span",qa,e(a(u)("user.commission"))+":",1),t("span",za,e(_(n.value.totals.renewal.commission)),1)])]),t("div",Oa,[t("h3",null,e(a(u)("user.upgrade")),1),t("div",ja,[t("span",Ga,e(a(u)("user.count"))+":",1),t("span",La,e(n.value.totals.upgrade.count),1)]),t("div",Ya,[t("span",Qa,e(a(u)("user.amount"))+":",1),t("span",Ha,e(_(n.value.totals.upgrade.amount)),1)]),t("div",Wa,[t("span",Ja,e(a(u)("user.commission"))+":",1),t("span",Za,e(_(n.value.totals.upgrade.commission)),1)])]),t("div",Ka,[t("h3",null,e(a(u)("user.grandTotal")),1),t("div",Xa,[t("span",es,e(a(u)("user.count"))+":",1),t("span",ts,e(n.value.totals.new_purchase.count+n.value.totals.renewal.count),1)]),t("div",as,[t("span",ss,e(a(u)("user.amount"))+":",1),t("span",ls,e(_(n.value.totals.new_purchase.amount+n.value.totals.renewal.amount)),1)]),t("div",os,[t("span",ns,e(a(u)("user.commission"))+":",1),t("span",us,e(_(n.value.totals.new_purchase.commission+n.value.totals.renewal.commission)),1)]),t("div",is,[t("span",rs,e(a(u)("user.commission"))+":",1),t("span",ds,e(_(n.value.totals.upgrade.commission+n.value.totals.upgrade.commission)),1)])])])])]))}});const ms=Te(cs,[["__scopeId","data-v-a52bfb54"]]),_s={class:"container"},ps={style:{"margin-bottom":"15px"}},fs={name:"userManager"},bs=J({...fs,setup(F){const{t:o}=W.exports.useI18n(),u=p(!1),n=p([{key:"email",des:o("userTable.filter.email"),op:[o("userTable.filter.fuzzy")],type:"input",value:""},{key:"id",des:o("userTable.filter.userId"),op:["=",">",">=","<","<="],type:"input",value:""},{key:"transfer_enable",des:o("userTable.filter.flow"),op:["=",">",">=","<","<="],type:"input",value:""},{key:"d",des:o("userTable.filter.down"),op:["=",">",">=","<","<="],type:"input",value:""},{key:"expired_at",des:o("userTable.filter.expirationTime"),op:["=",">",">=","<","<="],type:"date",value:""},{key:"uuid",des:o("userTable.filter.uuid"),op:["="],type:"input",value:""},{key:"token",des:o("userTable.filter.token"),op:["="],type:"input",value:""},{key:"banned",des:o("userTable.filter.userStatus"),op:["="],type:"select",value:[{des:o("userTable.filter.option.normal"),value:0},{des:o("userTable.filter.option.banned"),value:1}]},{key:"invite_user_id",des:o("userTable.filter.inviterId"),op:["="],type:"input",value:""},{key:"invite_by_email",des:o("userTable.filter.inviterEmail"),op:[o("userTable.filter.fuzzy"),"\u4E3A\u7A7A"],type:"input",value:""},{key:"is_admin",des:o("userTable.filter.admin"),op:["="],type:"select",value:[{des:o("userTable.filter.option.no"),value:0},{des:o("userTable.filter.option.yes"),value:1}]},{key:"expire_days",des:o("userTable.filter.expireDays"),op:["=",">","<",">=","<="],type:"input",value:1},{key:"balance",des:"\u4F59\u989D",op:["=",">","<",">=","<="],type:"input",value:1},{key:"commission_balance",des:"\u4F63\u91D1",op:["=",">","<",">=","<="],type:"input",value:1}]),_=d=>{const r=be.value.find(v=>v.id===d);return r?r.name:"-"},V=p(At),f=p(!1),m=()=>{f.value=!1,S()},b=p(!1),D=Q({subject:"",content:"",filter:[]}),x=()=>{D.filter=T.value.filter,Pt(D).then(()=>{b.value=!1})},y=()=>{Rt(T.value).then(d=>{const r=new Blob([d],{type:"text/csv;charset=UTF-8;"}),v=document.createElement("a");v.href=URL.createObjectURL(r),v.setAttribute("download","data.csv"),document.body.appendChild(v),v.click(),document.body.removeChild(v)})},O=d=>{$t({id:d.id}).then(r=>{var v,P;(P=(v=r.data)==null?void 0:v.invite_user)!=null&&P.email&&(d.invite_user_email=r.data.invite_user.email),V.value={...d},f.value=!0})},N=d=>{navigator.clipboard?navigator.clipboard.writeText(d).then(()=>{R.success({content:o("userTable.message.copySuccess")})}).catch(r=>{R.error({content:o("userTable.message.copyFail")+r.toString()})}):R.success({content:o("userTable.message.copyNotSupported")})},C=d=>{Mt({id:d.id}).then(r=>{r.data&&(R.success({content:o("userTable.message.resetSuccess")}),S())})},E=p(!1),j=()=>{E.value=!0},G=()=>{E.value=!1,S()},h=p(),w=p(!1),Z=d=>{h.value=d.email,w.value=!0},me=()=>{w.value=!1},_e=p(),K=p(!1),Ce=d=>{_e.value=d.id,K.value=!0},Ve=()=>{K.value=!1},pe=p(),X=p(!1),De=d=>{qt({user_id:d.id}).then(r=>{r.data?(pe.value=r.data,X.value=!0):R.error({content:r.message})})},$=Q({direction:"desc",sort:null}),Ue=(d,r,v)=>{let P="DESC";r.sorter.direction==="ascend"&&(P="ASC"),$.direction=P,$.sort=r.sorter.field=="plan_name"?"plan_id":r.sorter.field,S({pageSize:M.pageSize,current:1,sort_type:$.direction,sort:$.sort})},Ie=()=>{T.value?se.confirm({content:o("menu.dropdown.confirmBan"),okText:o("menu.dropdown.confirmOk"),cancelText:o("menu.dropdown.confirmCancel"),onOk:()=>{zt(T.value).then(()=>S(I))}}):R.info(o("menu.dropdown.noCondition"))},Se=()=>{T.value?se.confirm({content:o("menu.dropdown.confirmDelete"),onOk:()=>{Ne()}}):R.info(o("menu.dropdown.noCondition"))},Ne=()=>{let d=[];ee.value.forEach((r,v)=>{d.push(r.id)}),Ot({ids:d}).then(()=>S(I))},Fe=Qt(),Ee=(d,r)=>{Fe.push({path:d,query:{id:r}})},{loading:Be,setLoading:fe}=Ft(!0),ee=p([]),H=p([]),Ae=p([]),Pe=p("medium"),T=p(),A=p([]),I={current:1,pageSize:100},M=Q({...I,showTotal:!0,showJumper:!0,showPageSize:!0,pageSizeOptions:[100,500,1e3]}),Re=d=>{M.pageSize=d,I.pageSize=d,S({...I,pageSize:d})},$e=pt(()=>[{title:o("userTable.columns.id"),dataIndex:"id",slotName:"id",width:80,sortable:{sortDirections:["ascend","descend"]}},{title:o("userTable.columns.email"),dataIndex:"email",slotName:"email",sortable:{sortDirections:["ascend","descend"]},width:200},{title:o("userTable.columns.banned"),dataIndex:"banned",slotName:"banned",sortable:{sortDirections:["ascend","descend"]},width:100},{title:o("userTable.columns.plan_name"),dataIndex:"plan_name",slotName:"plan_name",sortable:{sortDirections:["ascend","descend"]},width:130},{title:o("userTable.columns.group_id"),dataIndex:"group_id",slotName:"group_id",sortable:{sortDirections:["ascend","descend"]},width:100},{title:o("userTable.columns.u"),dataIndex:"u",slotName:"u",sortable:{sortDirections:["ascend","descend"]},width:120},{title:o("userTable.columns.transfer_enable"),dataIndex:"transfer_enable",slotName:"transfer_enable",sortable:{sortDirections:["ascend","descend"]},width:120},{title:o("userTable.columns.expired_at"),dataIndex:"expired_at",slotName:"expired_at",sortable:{sortDirections:["ascend","descend"]},width:120},{title:o("userTable.columns.balance"),dataIndex:"balance",slotName:"balance",sortable:{sortDirections:["ascend","descend"]},width:120},{title:o("userTable.columns.commission_balance"),dataIndex:"commission_balance",slotName:"commission_balance",sortable:{sortDirections:["ascend","descend"]},width:120},{title:o("userTable.columns.created_at"),dataIndex:"created_at",slotName:"created_at",sortable:{sortDirections:["ascend","descend"]},width:120},{title:o("userTable.columns.operations"),dataIndex:"operations",slotName:"operations",fixed:"right"}]),Me=d=>{d?T.value=d:(T.value=null,A.value[0]?A.value[0].value=void 0:A.value=[]),I.current=1,S(I),u.value=!1},be=p([]),qe=async()=>{const{data:d}=await Et();be.value=d},ze=d=>{T.value={filter:[{key:"invite_user_id",condition:"=",value:d.id,tempValue:""}]},A.value=[],A.value.push({key:"invite_user_id",condition:"=",value:d.id,tempValue:""}),S(I)},S=async d=>{d||(d={...I}),$.sort&&(d.sort=$.sort,d.sort_type=$.direction),fe(!0);try{const{data:r,total:v}=await jt(d,T.value);ee.value=r,M.current=d.current,M.total=v}catch{}finally{fe(!1)}},Oe=d=>{S({...I,current:d})},L=Ht();return ft(()=>{L.query.invite_by_email&&(T.value={filter:[{key:"invite_by_email",condition:"=",value:L.query.invite_by_email,tempValue:""}]},A.value.push({key:"invite_by_email",condition:"=",value:L.query.invite_by_email,tempValue:""})),L.query.email&&(T.value={filter:[{key:"email",condition:"\u6A21\u7CCA",value:L.query.email,tempValue:""}]},A.value.push({key:"email",condition:"\u6A21\u7CCA",value:L.query.email,tempValue:""})),ce().then(d=>{let r=[];d.data.forEach((v,P)=>{r.push({des:v.name,value:v.id})}),n.value.push({key:"plan_id",des:"\u8BA2\u9605",op:["="],type:"select-multiple",value:r})}),S(I)}),bt(()=>$e.value,d=>{H.value=ke(d),H.value.forEach((r,v)=>{r.checked=!0}),Ae.value=ke(H.value)},{deep:!0,immediate:!0}),qe(),(d,r)=>{const v=vt("Breadcrumb"),P=ht,U=ie,g=yt,ve=wt,he=kt,je=re,ye=Tt,Ge=gt,Le=xt,Ye=ot,Qe=Ct,He=nt,We=ut,Je=it,Ze=rt,Ke=Vt,Xe=Dt,Y=se,et=Ut,te=ne,ae=ue,tt=It,at=de;return k(),B("div",_s,[s(v,{items:["menu.user","menu.user.manager"]},null,8,["items"]),s(Xe,null,{default:l(()=>[t("div",ps,[s(je,null,{default:l(()=>[s(U,{type:"outline",onClick:r[0]||(r[0]=()=>u.value=!0)},{default:l(()=>[s(P),i(" "+e(a(o)("menu.button.filter")),1)]),_:1}),s(ve,null,{content:l(()=>[s(g,{onClick:y},{default:l(()=>[i(e(a(o)("menu.dropdown.dumpCSV")),1)]),_:1}),s(g,{onClick:r[1]||(r[1]=c=>b.value=!0)},{default:l(()=>[i(e(a(o)("menu.dropdown.sendEmail")),1)]),_:1}),T.value?(k(),z(g,{key:0,onClick:Ie},{default:l(()=>[i(e(a(o)("menu.dropdown.batchBan")),1)]),_:1})):(k(),z(g,{key:1,disabled:""},{default:l(()=>[i(e(a(o)("menu.dropdown.batchBan")),1)]),_:1})),T.value?(k(),z(g,{key:2,onClick:Se},{default:l(()=>[i(e(a(o)("menu.dropdown.batchDelete")),1)]),_:1})):(k(),z(g,{key:3,disabled:""},{default:l(()=>[i(e(a(o)("menu.dropdown.batchDelete")),1)]),_:1}))]),default:l(()=>[s(U,{type:"outline"},{default:l(()=>[i(e(a(o)("menu.dropdown.operations")),1)]),_:1})]),_:1}),s(U,{type:"outline",onClick:j},{icon:l(()=>[s(he)]),default:l(()=>[i(" "+e(a(o)("menu.button.addUser")),1)]),_:1})]),_:1})]),s(Ke,{"row-key":"id",loading:a(Be),pagination:M,columns:H.value,data:ee.value,bordered:!1,size:Pe.value,onPageChange:Oe,onPageSizeChange:Re,onChange:Ue},{index:l(({rowIndex:c})=>[i(e(c+1+(M.current-1)*M.pageSize),1)]),u:l(({record:c})=>[i(e(((c.u+c.d)/1024/1024/1024).toFixed(2)),1)]),banned:l(({record:c})=>[s(ye,{color:c.banned===0?"green":"red"},{default:l(()=>[i(e(c.banned===0?a(o)("userTable.tag.normal"):a(o)("userTable.tag.banned")),1)]),_:2},1032,["color"])]),transfer_enable:l(({record:c})=>[i(e((c.transfer_enable/1024/1024/1024).toFixed(2)),1)]),balance:l(({record:c})=>[i(e((c.balance/100).toFixed(2)),1)]),commission_balance:l(({record:c})=>[i(e((c.commission_balance/100).toFixed(2)),1)]),expired_at:l(({record:c})=>[s(ye,{color:c.expired_at<1||a(lt)(c.expired_at)>0?"green":"red"},{default:l(()=>[i(e(c.expired_at>0?a(we)(c.expired_at):a(o)("userTable.tag.permanent")),1)]),_:2},1032,["color"])]),created_at:l(({record:c})=>[i(e(a(we)(c.created_at)),1)]),plan_name:l(({record:c})=>[i(e(c.plan_name?c.plan_name:"-"),1)]),group_id:l(({record:c})=>[i(e(_(c.group_id)),1)]),operations:l(({record:c})=>[s(ve,{"popup-max-height":!1},{content:l(()=>[s(g,{onClick:q=>O(c)},{default:l(()=>[s(U,{type:"text"},{default:l(()=>[t("span",null,[s(Le),i(" "+e(a(o)("userTable.columns.operations.edit")),1)])]),_:1})]),_:2},1032,["onClick"]),s(g,{onClick:q=>De(c)},{default:l(()=>[s(U,{type:"text"},{default:l(()=>[t("span",null,[s(Ye),i(" "+e(a(o)("userTable.modal.RenewalNewPurchase")),1)])]),_:1})]),_:2},1032,["onClick"]),s(g,{onClick:q=>Z(c)},{default:l(()=>[s(U,{type:"text"},{default:l(()=>[t("span",null,[s(he),i(" "+e(a(o)("userTable.columns.operations.assign_orders")),1)])]),_:1})]),_:2},1032,["onClick"]),s(g,{onClick:q=>N(c.subscribe_url)},{default:l(()=>[s(U,{type:"text"},{default:l(()=>[t("span",null,[s(Qe),i(" "+e(a(o)("userTable.columns.operations.copy_subscription_URL")),1)])]),_:1})]),_:2},1032,["onClick"]),s(g,{onClick:q=>C(c)},{default:l(()=>[s(U,{type:"text"},{default:l(()=>[t("span",null,[s(He),i(" "+e(a(o)("userTable.columns.operations.Reset_UUID_and_subscription_URL")),1)])]),_:1})]),_:2},1032,["onClick"]),s(g,{onClick:q=>Ee("/subscription/order",c.id)},{default:l(()=>[s(U,{type:"text"},{default:l(()=>[t("span",null,[s(We),i(" "+e(a(o)("userTable.columns.operations.his_order")),1)])]),_:1})]),_:2},1032,["onClick"]),s(g,{onClick:q=>ze(c)},{default:l(()=>[s(U,{type:"text"},{default:l(()=>[t("span",null,[s(Je),i(" "+e(a(o)("userTable.columns.operations.his_invitation")),1)])]),_:1})]),_:2},1032,["onClick"]),s(g,{onClick:q=>Ce(c)},{default:l(()=>[s(U,{type:"text"},{default:l(()=>[t("span",null,[s(Ze),i(e(a(o)("userTable.columns.operations.his_traffic_records")),1)])]),_:1})]),_:2},1032,["onClick"])]),default:l(()=>[s(U,{type:"text"},{default:l(()=>[i(e(a(o)("userTable.columns.operations"))+" ",1),s(Ge)]),_:1})]),_:2},1024)]),_:1},8,["loading","pagination","columns","data","size"])]),_:1}),s(Y,{width:650,visible:E.value,footer:!1,"unmount-on-close":!0,onCancel:G},{title:l(()=>[i(e(a(o)("userNetworkTable.form.add")),1)]),default:l(()=>[s(Jt,{data:V.value,onClose:G},null,8,["data"])]),_:1},8,["visible"]),s(et,{width:650,visible:f.value,footer:!1,"unmount-on-close":!0,onCancel:r[2]||(r[2]=()=>{f.value=!1})},{title:l(()=>[i(e(a(o)("userTable.form.title")),1)]),default:l(()=>[s(Gt,{data:V.value,onClose:m},null,8,["data"])]),_:1},8,["visible"]),s(Y,{width:550,visible:u.value,footer:!1,onCancel:r[4]||(r[4]=()=>{u.value=!1})},{title:l(()=>[i(e(a(o)("userTable.modal.filterConditions")),1)]),default:l(()=>[s(Nt,{filter:n.value,"default-cond":A.value,onCallback:Me,onCancel:r[3]||(r[3]=c=>u.value=!1)},null,8,["filter","default-cond"])]),_:1},8,["visible"]),s(Y,{width:650,visible:w.value,footer:!1,"unmount-on-close":!0,onCancel:me},{title:l(()=>[i(e(a(o)("userTable.modal.assignOrder")),1)]),default:l(()=>[s(Zt,{email:h.value,onClose:me},null,8,["email"])]),_:1},8,["visible"]),s(Y,{width:650,visible:K.value,footer:!1,"unmount-on-close":!0,onCancel:Ve},{title:l(()=>[i(e(a(o)("userTable.modal.trafficRecords")),1)]),default:l(()=>[s(Lt,{userid:_e.value},null,8,["userid"])]),_:1},8,["visible"]),s(Y,{width:750,visible:X.value,footer:!1,"unmount-on-close":!0,onCancel:r[5]||(r[5]=()=>{X.value=!1})},{title:l(()=>[i(e(a(o)("userTable.modal.RenewalNewPurchase")),1)]),default:l(()=>[s(ms,{data:pe.value},null,8,["data"])]),_:1},8,["visible"]),s(Y,{visible:b.value,title:a(o)("userTable.email.title"),onOk:x,onCancel:r[8]||(r[8]=()=>b.value=!1)},{default:l(()=>[s(at,{layout:"vertical"},{default:l(()=>[s(ae,{label:a(o)("userTable.email.subject")},{default:l(()=>[T.value?(k(),z(te,{key:0,disabled:"","default-value":a(o)("userTable.email.recipient.filtered")},null,8,["default-value"])):(k(),z(te,{key:1,disabled:"","default-value":a(o)("userTable.email.recipient.all")},null,8,["default-value"]))]),_:1},8,["label"]),s(ae,{label:a(o)("userTable.email.subject")},{default:l(()=>[s(te,{modelValue:D.subject,"onUpdate:modelValue":r[6]||(r[6]=c=>D.subject=c),placeholder:a(o)("userTable.email.subject.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),s(ae,{label:a(o)("userTable.email.content")},{default:l(()=>[s(tt,{modelValue:D.content,"onUpdate:modelValue":r[7]||(r[7]=c=>D.content=c),placeholder:a(o)("userTable.email.content.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1},8,["visible","title"])])}}});const Gs=Te(bs,[["__scopeId","data-v-b5418a20"]]);export{Gs as default};
