import{v as w,_ as P}from"./index.931e29e8.js";/* empty css               *//* empty css              *//* empty css               *//* empty css              *//* empty css              *//* empty css                *//* empty css              *//* empty css               *//* empty css               *//* empty css                */import{d as B,r as Q,o as z,C,D as I,aI as e,aH as t,u as a,aM as i,aN as c,aW as M,b2 as G,b7 as H,bT as W,bB as X,bC as Z,aX as F,b3 as E,b5 as q,f as h,c as J,w as K,aZ as Y,G as ee,aF as D,a6 as te,bR as oe,bE as ae,b6 as ne,bz as le}from"./arco.d070d3bc.js";import{u as se}from"./loading.50473042.js";import{c as N}from"./cloneDeep.47777689.js";import{S as re,d as k,D as ce,Q as ue}from"./router.739b215b.js";/* empty css               *//* empty css               *//* empty css               */import"./chart.dd5d83bb.js";import"./vue.02dbc53f.js";const me=B({__name:"router-form",props:["data"],emits:["close"],setup(S,{emit:d}){const p=S,{t:r}=w.exports.useI18n(),y=()=>{d("close")},n=Q(p.data),V=()=>{n.match=n.match.toString().split(`
`),re(n).then(b=>{b.data&&(y(),M.success(r("routerForm.AddSuccess")))})};return z(()=>{n.match=n.match.toString().replaceAll(",",`
`)}),(b,o)=>{const x=G,u=H,R=W,g=X,v=Z,l=F,s=E,_=q;return C(),I("div",null,[e(_,{layout:"vertical"},{default:t(()=>[e(u,{field:"remarks",label:a(r)("routerTable.columns.remarks")},{default:t(()=>[e(x,{modelValue:n.remarks,"onUpdate:modelValue":o[0]||(o[0]=f=>n.remarks=f),placeholder:a(r)("routerTable.columns.remarks.input")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(u,{field:"match",label:a(r)("routerTable.columns.match.value")},{default:t(()=>[e(R,{data:n.match,modelValue:n.match,"onUpdate:modelValue":o[1]||(o[1]=f=>n.match=f),type:"textarea",placeholder:`example.com\r
*.example.com`},null,8,["data","modelValue"])]),_:1},8,["label"]),e(u,{field:"action",label:a(r)("routerForm.Action")},{default:t(()=>[e(v,{"default-value":"block",modelValue:n.action,"onUpdate:modelValue":o[2]||(o[2]=f=>n.action=f)},{default:t(()=>[e(g,{value:"block"},{default:t(()=>[i(c(a(r)("action.block")),1)]),_:1}),e(g,{value:"dns"},{default:t(()=>[i(c(a(r)("action.dns")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),e(u,null,{default:t(()=>[e(s,null,{default:t(()=>[e(l,{type:"dashed",onClick:y},{default:t(()=>[i(c(a(r)("button.cancel")),1)]),_:1}),e(l,{type:"primary",onClick:V},{default:t(()=>[i(c(a(r)("button.submit")),1)]),_:1})]),_:1})]),_:1})]),_:1})])}}}),ie={class:"container"},de={style:{"margin-bottom":"15px"}},pe={key:0},_e={key:1},fe={name:"ServerRouter"},be=B({...fe,setup(S){const d=h(!1),p=h(k),r=()=>{p.value=k,d.value=!1,v()},y=l=>{let s=k;Object.keys(l).forEach(_=>{s[_]=l[_]}),p.value=s,d.value=!0},n=l=>{ce({id:l.id}).then(s=>{s.data&&(p.value=k,M.success({content:o("message.delete.success")}))}),v()},{loading:V,setLoading:b}=se(!0),{t:o}=w.exports.useI18n(),x=h([]),u=h([]),R=h([]),g=J(()=>[{title:o("routerTable.columns.id"),dataIndex:"id",slotName:"id"},{title:o("routerTable.columns.remarks"),dataIndex:"remarks"},{title:o("routerTable.columns.match"),dataIndex:"match",slotName:"match"},{title:o("routerTable.columns.action"),dataIndex:"action",slotName:"action"},{title:o("routerTable.columns.operations"),dataIndex:"operations",slotName:"operations"}]),v=async()=>{b(!0);try{const{data:l}=await ue();x.value=l}catch{}finally{b(!1)}};return v(),K(()=>g.value,l=>{u.value=N(l),u.value.forEach((s,_)=>{s.checked=!0}),R.value=N(u.value)},{deep:!0,immediate:!0}),(l,s)=>{const _=Y("Breadcrumb"),f=te,T=F,O=oe,U=E,$=ae,A=ne,j=le;return C(),I("div",ie,[e(_,{items:["menu.server","menu.server.router"]},null,8,["items"]),e(A,null,{default:t(()=>[ee("div",de,[e(T,{onClick:s[0]||(s[0]=()=>{d.value=!0,p.value=a(k)}),type:"outline"},{icon:t(()=>[e(f)]),default:t(()=>[i(" "+c(a(o)("button.add.router")),1)]),_:1})]),e($,{"row-key":"id",loading:a(V),columns:u.value,data:x.value,bordered:!1,pagination:!1},{match:t(({record:m})=>[i(" \u5339\u914D "+c(m.match.length)+" \u6761\u89C4\u5219 ",1)]),action:t(({record:m})=>[m.action=="dns"?(C(),I("span",pe,c(a(o)("action.dns")),1)):D("",!0),m.action=="block"?(C(),I("span",_e,c(a(o)("action.block")),1)):D("",!0)]),operations:t(({record:m})=>[e(U,null,{default:t(()=>[e(T,{type:"primary",onClick:L=>y(m)},{default:t(()=>[i(c(a(o)("button.edit")),1)]),_:2},1032,["onClick"]),e(O,{content:a(o)("permission.delete"),onOk:L=>n(m),type:"warning"},{default:t(()=>[e(T,{type:"primary",status:"danger"},{default:t(()=>[i(c(a(o)("button.delete")),1)]),_:1})]),_:2},1032,["content","onOk"])]),_:2},1024)]),_:1},8,["loading","columns","data"])]),_:1}),e(j,{visible:d.value,"onUpdate:visible":s[1]||(s[1]=m=>d.value=m),"unmount-on-close":!0,footer:!1},{default:t(()=>[e(me,{data:p.value,onClose:r},null,8,["data"])]),_:1},8,["visible"])])}}});const Ue=P(be,[["__scopeId","data-v-2f9af006"]]);export{Ue as default};
