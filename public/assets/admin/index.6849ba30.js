import{y as C,B as V,C as z,J as A,v as P,E as K,_ as W}from"./index.66251433.js";/* empty css               *//* empty css              *//* empty css               *//* empty css              *//* empty css              *//* empty css                *//* empty css              *//* empty css               *//* empty css                *//* empty css               */import{d as $,r as F,o as Y,C as O,aE as ee,aH as t,aI as e,u as o,aM as s,aN as d,G as j,b2 as te,b7 as oe,bD as ae,bS as ne,bB as le,bC as ie,aX as J,b3 as L,b5 as se,f as w,c as de,w as ce,aZ as re,D as ue,a6 as me,aV as pe,bR as _e,bE as fe,b6 as ye,bz as be}from"./arco.d070d3bc.js";import{u as we}from"./loading.50473042.js";import{c as M}from"./cloneDeep.47777689.js";/* empty css               *//* empty css               *//* empty css               */import"./chart.dd5d83bb.js";import"./vue.02dbc53f.js";const ve={id:void 0,title:"",content:"",show:void 0,img_url:"",windows_type:1,tags:[],created_at:void 0,updated_at:void 0},he={...ve},ge=u=>C.post(V.saveNotify,z(u)),Te=u=>C.post(V.showNotify,z(u)),Ne=u=>C.post(V.deleteNotify,z(u)),xe=u=>C.get(V.queryNotify+A(u)),Ce={style:{width:"100%","text-align":"center"}},Ve=$({__name:"notify-form",props:["data"],emits:["close"],setup(u,{emit:f}){const _=u,{t:a}=P.exports.useI18n(),n=F(he),T=()=>f("close"),k=()=>{ge(n).then(y=>{T()})};return Y(()=>{_.data&&(Object.keys(_.data).forEach(y=>{n[y]=_.data[y]}),(n.windows_type<1||n.windows_type>7)&&(n.windows_type=void 0))}),(y,c)=>{const v=te,l=oe,N=ae,b=ne,m=le,I=ie,h=J,x=L,S=se;return O(),ee(S,{layout:"vertical",model:n,onSubmit:k},{default:t(()=>[e(l,{label:o(a)("notifyTable.form.title")},{default:t(()=>[e(v,{modelValue:n.title,"onUpdate:modelValue":c[0]||(c[0]=i=>n.title=i),placeholder:o(a)("notifyTable.form.placeholder.title")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(l,{label:o(a)("notifyTable.form.content")},{default:t(()=>[e(N,{modelValue:n.content,"onUpdate:modelValue":c[1]||(c[1]=i=>n.content=i),"auto-size":{minRows:10},placeholder:o(a)("notifyTable.form.placeholder.content"),"show-word-limit":!0},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(l,{label:o(a)("notifyTable.form.tag")},{default:t(()=>[e(b,{modelValue:n.tags,"onUpdate:modelValue":c[2]||(c[2]=i=>n.tags=i),placeholder:o(a)("notifyTable.form.placeholder.tag"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(l,{label:o(a)("notifyTable.form.windows_type")},{default:t(()=>[e(I,{modelValue:n.windows_type,"onUpdate:modelValue":c[3]||(c[3]=i=>n.windows_type=i),placeholder:o(a)("notifyTable.form.windows_type_desc")},{default:t(()=>[e(m,{value:1},{default:t(()=>[s(d(o(a)("notifyTable.form.windows_type.option1")),1)]),_:1}),e(m,{value:2},{default:t(()=>[s(d(o(a)("notifyTable.form.windows_type.option2")),1)]),_:1}),e(m,{value:3},{default:t(()=>[s(d(o(a)("notifyTable.form.windows_type.option3")),1)]),_:1}),e(m,{value:4},{default:t(()=>[s(d(o(a)("notifyTable.form.windows_type.option4")),1)]),_:1}),e(m,{value:5},{default:t(()=>[s(d(o(a)("notifyTable.form.windows_type.option5")),1)]),_:1}),e(m,{value:6},{default:t(()=>[s(d(o(a)("notifyTable.form.windows_type.option6")),1)]),_:1}),e(m,{value:7},{default:t(()=>[s(d(o(a)("notifyTable.form.windows_type.option7")),1)]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),e(l,{label:o(a)("notifyTable.form.image_url")},{default:t(()=>[e(v,{modelValue:n.img_url,"onUpdate:modelValue":c[4]||(c[4]=i=>n.img_url=i),placeholder:o(a)("notifyTable.form.placeholder.image_url")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(l,null,{default:t(()=>[j("div",Ce,[e(x,null,{default:t(()=>[e(h,{type:"dashed",onClick:T},{default:t(()=>[s(d(o(a)("notifyTable.form.cancel")),1)]),_:1}),e(h,{type:"primary","html-type":"submit"},{default:t(()=>[s(d(o(a)("notifyTable.form.submit")),1)]),_:1})]),_:1})])]),_:1})]),_:1},8,["model"])}}}),ke={class:"container"},Ie={style:{"margin-bottom":"15px"}},Se={name:"noticeManager"},Be=$({...Se,setup(u){const f=w(!1),_=w(),a=()=>{_.value={id:void 0,title:"",content:"",show:void 0,img_url:"",windows_type:1,tags:[],created_at:void 0,updated_at:void 0},f.value=!0},n=()=>{f.value=!1,i()},T=r=>{_.value=r,f.value=!0},k=r=>{Te({id:r.id}).then(()=>{i()})},y=r=>{Ne({id:r.id}).then(()=>{i()})},{loading:c,setLoading:v}=we(!0),{t:l}=P.exports.useI18n(),N=w([]),b=w([]),m=w([]),I=w("medium"),h={current:1,pageSize:100},x=F({...h}),S=de(()=>[{title:l("notifyTable.columns.id"),dataIndex:"id",slotName:"id"},{title:l("notifyTable.columns.show"),dataIndex:"show",slotName:"show"},{title:l("notifyTable.columns.title"),dataIndex:"title",slotName:"title"},{title:l("notifyTable.columns.created_at"),dataIndex:"created_at",slotName:"created_at"},{title:l("notifyTable.columns.operations"),dataIndex:"operations",slotName:"operations"}]),i=async(r={current:1,pageSize:100})=>{v(!0);try{const{data:g}=await xe(r);N.value=g}catch{}finally{v(!1)}},R=r=>{i({...h,current:r})};return i(),ce(()=>S.value,r=>{b.value=M(r),b.value.forEach((g,D)=>{g.checked=!0}),m.value=M(b.value)},{deep:!0,immediate:!0}),(r,g)=>{const D=re("Breadcrumb"),q=me,B=J,E=L,G=pe,H=_e,Q=fe,X=ye,Z=be;return O(),ue("div",ke,[e(D,{items:["menu.user","menu.user.notice"]},null,8,["items"]),e(X,null,{default:t(()=>[j("div",Ie,[e(E,null,{default:t(()=>[e(B,{onClick:a,type:"outline"},{icon:t(()=>[e(q)]),default:t(()=>[s(" "+d(o(l)("notifyTable.columns.add")),1)]),_:1})]),_:1})]),e(Q,{"row-key":"id",loading:o(c),pagination:!1,columns:b.value,data:N.value,bordered:!1,size:I.value,onPageChange:R},{index:t(({rowIndex:p})=>[s(d(p+1+(x.current-1)*x.pageSize),1)]),show:t(({record:p})=>[e(G,{"checked-value":1,"unchecked-value":0,onChange:U=>k(p),"default-checked":p.show},null,8,["onChange","default-checked"])]),created_at:t(({record:p})=>[s(d(o(K)(p.created_at)),1)]),operations:t(({record:p})=>[e(E,null,{default:t(()=>[e(B,{type:"primary",onClick:U=>T(p)},{default:t(()=>[s(d(o(l)("notifyTable.columns.edit")),1)]),_:2},1032,["onClick"]),e(H,{content:o(l)("notifyTable.columns.operations.delete_description"),onOk:U=>y(p)},{default:t(()=>[e(B,{type:"primary",status:"danger"},{default:t(()=>[s(d(o(l)("notifyTable.columns.delete")),1)]),_:1})]),_:2},1032,["content","onOk"])]),_:2},1024)]),_:1},8,["loading","columns","data","size"])]),_:1}),e(Z,{width:650,visible:f.value,footer:!1,"unmount-on-close":!0,onCancel:n},{title:t(()=>[s(d(o(l)("notifyTable.title")),1)]),default:t(()=>[e(Ve,{data:_.value,onClose:n},null,8,["data"])]),_:1},8,["visible"])])}}});const Ae=W(Be,[["__scopeId","data-v-d537d319"]]);export{Ae as default};
